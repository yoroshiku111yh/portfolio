$(document).ready(function(){window.requestAnimFrame=(function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(F){window.setTimeout(F,1000/60)}})();var h=document.getElementById("banner");var f=document.getElementById("number");var v=f.getContext("2d");var c=h.getContext("2d");var d=$("#bannerWrapper").width();var s=$("#bannerWrapper").height();var n=d;var z=s;var k=2;var E=200;var g="rgba(255, 255, 255, 0)";var l=["rgba(45, 116, 204, 0.5)","rgba(73, 165, 35, 0.77)","rgba(212, 32, 23, 0.77)"];var x=[];var q=[];var m=125;var t="yoroshiku";var B=50;var w=false;var j=["#HTML","#CSS","#JAVASCRIPT","#CANVAS","#YOROSHIKU"];var u=0;var A=500;h.width=d;h.height=s;f.width=n;f.height=z;numberOffsetX=0;numberOffsetY=0;function i(G,F){return Math.floor(Math.random()*(F-G+1))+G}createCanvas=function(){c.fillStyle=g;c.fillRect(0,0,d,s)};particlesBanner=function(){this.x=d*Math.random();this.y=s*Math.random();this.x1=0;this.y1=0;this.radius=Math.random()*3+1;this.radius0=this.radius;this.art=false;this.disband=false;this.color=l[i(0,2)];this.vx=-1+Math.random()*3;this.vy=-1+Math.random()*3;this.vx0=this.vx;this.vy0=this.vy;this.draw=function(){c.fillStyle=this.color;c.beginPath();c.arc(this.x,this.y,this.radius,0,2*Math.PI);c.fill()}};drawNumber=function(G){v.clearRect(0,0,n,z);v.fillStyle="#24282f";v.textAlign="center";v.font=m+"px Arial";var K=v.measureText(G).width;if(K>d+50){var J=(((d-30)*m)/K);v.font=J+"px Arial"}v.fillText(G,n/2,z/2+m/4);var I=document.getElementById("number").getContext("2d");var M=I.getImageData(0,0,n,z).data;q=[];for(var H=M.length;H>=0;H-=4){if(M[H]!==0){var F=(H/4)%n;var L=Math.floor(Math.floor((H/n)/4));if((F&&F%(k*2+3)==0)&&(L&&L%(k*2+3)==0)){q.push({x:F,y:L})}}}};setParticlesNumber=function(){for(var F=0;F<q.length;F++){var G=x[F];var H=q[F];G.x1=H.x+numberOffsetX;G.y1=H.y+numberOffsetY;G.art=true;G.disband=false}};function D(){for(var F=0;F<E;F++){x.push(new particlesBanner(F))}}createParticles=function(H){var G=0;if(E<H+B){G=H-E+B}if(G>0){for(var F=0;F<G;F++){x.push(new particlesBanner(F))}}E=x.length};drawParticles=function(){for(var F=0;F<x.length;F++){var G=x[F];G.draw()}o();y();e()};drawNumber(j[u]);D();createParticles(q.length);setParticlesNumber();initBanner=function(){c.clearRect(0,0,d,s);createCanvas();drawParticles()};function o(){for(var F=0;F<x.length;F++){var G=x[F];G.x+=G.vx;G.y+=G.vy;if(G.x+G.radius>d){G.x=G.radius}else{if(G.x-G.radius<0){G.x=d-G.radius}}if(G.y+G.radius>s){G.y=G.radius}else{if(G.y-G.radius<0){G.y=s-G.radius}}}}function y(){var M=0.07,J=0.6,H=1;for(var K=0;K<x.length;K++){var F=x[K];if(F.art&&!F.disband){var O=F.x-F.x1,N=F.y-F.y1;var I=Math.atan2(N,O);var G=F.x1+Math.cos(I)*H;var L=F.y1+Math.sin(I)*H;F.vx+=(G-F.x)*M;F.vy+=(L-F.y)*M;F.vx*=J;F.vy*=J;F.x+=F.vx;F.y+=F.vy}else{if(F.disband){F.vx=F.vx0;F.vy=F.vy0}}}if(!w){w=true;setTimeout(r,A)}}function r(){for(var F=0;F<x.length;F++){p=x[F];if(p.art){p.disband=true}}if(w){setTimeout(b,A)}}function b(){if(u!=j.length-1){u++}else{u=0}drawNumber(j[u]);createParticles(q.length);setParticlesNumber();setTimeout(function(){w=false},A*2)}function e(){for(var F=0;F<x.length;F++){var G=x[F];if(G.art&&!G.disband){if(G.radius<G.radius0*2){G.radius+=G.radius/5}else{G.radius-=G.radius/5}}else{G.radius=G.radius0}}}function a(){$("#canvas").mousemove(function(F){console.log(F.pageX,F.pageY)})}a();function C(){c.clearRect(0,0,d,s);d=$("#bannerWrapper").width();s=$("#bannerWrapper").height();n=d;z=s;h.width=d;h.height=s;initBanner();requestAnimFrame(C)}C()});