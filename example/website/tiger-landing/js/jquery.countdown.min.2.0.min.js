(function(e){var h="countdown";var b=0;var f=1;var c=2;var a=3;var i=4;var g=5;var d=6;e.JQPlugin.createPlugin({name:h,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:false,padZeroes:false,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false}},_getters:["getTimes"],_rtlClass:h+"-rtl",_sectionClass:h+"-section",_amountClass:h+"-amount",_periodClass:h+"-period",_rowClass:h+"-row",_holdingClass:h+"-holding",_showClass:h+"-show",_descrClass:h+"-descr",_timerElems:[],_init:function(){var o=this;this._super();this._serverSyncs=[];var n=(typeof Date.now=="function"?Date.now:function(){return new Date().getTime()});var m=(window.performance&&typeof window.performance.now=="function");function k(q){var p=(q<1000000000000?(m?(performance.now()+performance.timing.navigationStart):n()):q||n());if(p-j>=1000){o._updateElems();j=p}l(k)}var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var j=0;if(!l||e.noRequestAnimationFrame){e.noRequestAnimationFrame=null;setInterval(function(){o._updateElems()},980)}else{j=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||n();l(k)}},UTCDate:function(r,q,p,n,m,l,k,j){if(typeof q=="object"&&q.constructor==Date){j=q.getMilliseconds();k=q.getSeconds();l=q.getMinutes();m=q.getHours();n=q.getDate();p=q.getMonth();q=q.getFullYear()}var o=new Date();o.setUTCFullYear(q);o.setUTCDate(1);o.setUTCMonth(p||0);o.setUTCDate(n||1);o.setUTCHours(m||0);o.setUTCMinutes((l||0)-(Math.abs(r)<30?r*60:r));o.setUTCSeconds(k||0);o.setUTCMilliseconds(j||0);return o},periodsToSeconds:function(j){return j[0]*31557600+j[1]*2629800+j[2]*604800+j[3]*86400+j[4]*3600+j[5]*60+j[6]},resync:function(){var k=this;e("."+this._getMarker()).each(function(){var m=e.data(this,k.name);if(m.options.serverSync){var l=null;for(var n=0;n<k._serverSyncs.length;n++){if(k._serverSyncs[n][0]==m.options.serverSync){l=k._serverSyncs[n];break}}if(l[2]==null){var o=(e.isFunction(m.options.serverSync)?m.options.serverSync.apply(this,[]):null);l[2]=(o?new Date().getTime()-o.getTime():0)-l[1]}if(m._since){m._since.setMilliseconds(m._since.getMilliseconds()+l[2])}m._until.setMilliseconds(m._until.getMilliseconds()+l[2])}});for(var j=0;j<k._serverSyncs.length;j++){if(k._serverSyncs[j][2]!=null){k._serverSyncs[j][1]+=k._serverSyncs[j][2];delete k._serverSyncs[j][2]}}},_instSettings:function(k,j){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(j){if(!this._hasElem(j)){this._timerElems.push(j)}},_hasElem:function(j){return(e.inArray(j,this._timerElems)>-1)},_removeElem:function(j){this._timerElems=e.map(this._timerElems,function(k){return(k==j?null:k)})},_updateElems:function(){for(var j=this._timerElems.length-1;j>=0;j--){this._updateCountdown(this._timerElems[j])}},_optionsChanged:function(k,j,n){if(n.layout){n.layout=n.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")}this._resetExtraLabels(j.options,n);var m=(j.options.timezone!=n.timezone);e.extend(j.options,n);this._adjustSettings(k,j,n.until!=null||n.since!=null||m);var l=new Date();if((j._since&&j._since<l)||(j._until&&j._until>l)){this._addElem(k[0])}this._updateCountdown(k,j)},_updateCountdown:function(k,j){k=k.jquery?k:e(k);j=j||this._getInst(k);if(!j){return}k.html(this._generateHTML(j)).toggleClass(this._rtlClass,j.options.isRTL);if(e.isFunction(j.options.onTick)){var n=j._hold!="lap"?j._periods:this._calculatePeriods(j,j._show,j.options.significant,new Date());if(j.options.tickInterval==1||this.periodsToSeconds(n)%j.options.tickInterval==0){j.options.onTick.apply(k[0],[n])}}var m=j._hold!="pause"&&(j._since?j._now.getTime()<j._since.getTime():j._now.getTime()>=j._until.getTime());if(m&&!j._expiring){j._expiring=true;if(this._hasElem(k[0])||j.options.alwaysExpire){this._removeElem(k[0]);if(e.isFunction(j.options.onExpiry)){j.options.onExpiry.apply(k[0],[])}if(j.options.expiryText){var l=j.options.layout;j.options.layout=j.options.expiryText;this._updateCountdown(k[0],j);j.options.layout=l}if(j.options.expiryUrl){window.location=j.options.expiryUrl}}j._expiring=false}else{if(j._hold=="pause"){this._removeElem(k[0])}}},_resetExtraLabels:function(k,j){for(var l in j){if(l.match(/[Ll]abels[02-9]|compactLabels1/)){k[l]=j[l]}}for(var l in k){if(l.match(/[Ll]abels[02-9]|compactLabels1/)&&typeof j[l]==="undefined"){k[l]=null}}},_adjustSettings:function(r,q,p){var o=null;for(var j=0;j<this._serverSyncs.length;j++){if(this._serverSyncs[j][0]==q.options.serverSync){o=this._serverSyncs[j][1];break}}if(o!=null){var n=(q.options.serverSync?o:0);var m=new Date()}else{var l=(e.isFunction(q.options.serverSync)?q.options.serverSync.apply(r[0],[]):null);var m=new Date();var n=(l?m.getTime()-l.getTime():0);this._serverSyncs.push([q.options.serverSync,n])}var k=q.options.timezone;k=(k==null?-m.getTimezoneOffset():k);if(p||(!p&&q._until==null&&q._since==null)){q._since=q.options.since;if(q._since!=null){q._since=this.UTCDate(k,this._determineTime(q._since,null));if(q._since&&n){q._since.setMilliseconds(q._since.getMilliseconds()+n)}}q._until=this.UTCDate(k,this._determineTime(q.options.until,m));if(n){q._until.setMilliseconds(q._until.getMilliseconds()+n)}}q._show=this._determineShow(q)},_preDestroy:function(k,j){this._removeElem(k[0]);k.empty()},pause:function(j){this._hold(j,"pause")},lap:function(j){this._hold(j,"lap")},resume:function(j){this._hold(j,null)},toggle:function(k){var j=e.data(k,this.name)||{};this[!j._hold?"pause":"resume"](k)},toggleLap:function(k){var j=e.data(k,this.name)||{};this[!j._hold?"lap":"resume"](k)},_hold:function(k,j){var m=e.data(k,this.name);if(m){if(m._hold=="pause"&&!j){m._periods=m._savePeriods;var l=(m._since?"-":"+");m[m._since?"_since":"_until"]=this._determineTime(l+m._periods[0]+"y"+l+m._periods[1]+"o"+l+m._periods[2]+"w"+l+m._periods[3]+"d"+l+m._periods[4]+"h"+l+m._periods[5]+"m"+l+m._periods[6]+"s");this._addElem(k)}m._hold=j;m._savePeriods=(j=="pause"?m._periods:null);e.data(k,this.name,m);this._updateCountdown(k,m)}},getTimes:function(k){var j=e.data(k,this.name);return(!j?null:(j._hold=="pause"?j._savePeriods:(!j._hold?j._periods:this._calculatePeriods(j,j._show,j.options.significant,new Date()))))},_determineTime:function(r,q){var j=this;var u=function(l){var k=new Date();k.setTime(k.getTime()+l*1000);return k};var t=function(y){y=y.toLowerCase();var x=new Date();var w=x.getFullYear();var v=x.getMonth();var p=x.getDate();var o=x.getHours();var n=x.getMinutes();var m=x.getSeconds();var l=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var k=l.exec(y);while(k){switch(k[2]||"s"){case"s":m+=parseInt(k[1],10);break;case"m":n+=parseInt(k[1],10);break;case"h":o+=parseInt(k[1],10);break;case"d":p+=parseInt(k[1],10);break;case"w":p+=parseInt(k[1],10)*7;break;case"o":v+=parseInt(k[1],10);p=Math.min(p,j._getDaysInMonth(w,v));break;case"y":w+=parseInt(k[1],10);p=Math.min(p,j._getDaysInMonth(w,v));break}k=l.exec(y)}return new Date(w,v,p,o,n,m,0)};var s=(r==null?q:(typeof r=="string"?t(r):(typeof r=="number"?u(r):r)));if(s){s.setMilliseconds(0)}return s},_getDaysInMonth:function(k,j){return 32-new Date(k,j,32).getDate()},_normalLabels:function(j){return j},_generateHTML:function(B){var A=this;B._periods=(B._hold?B._periods:this._calculatePeriods(B,B._show,B.options.significant,new Date()));var z=false;var y=0;var x=B.options.significant;var w=e.extend({},B._show);for(var v=b;v<=d;v++){z|=(B._show[v]=="?"&&B._periods[v]>0);w[v]=(B._show[v]=="?"&&!z?null:B._show[v]);y+=(w[v]?1:0);x-=(B._periods[v]>0?1:0)}var u=[false,false,false,false,false,false,false];for(var v=d;v>=b;v--){if(B._show[v]){if(B._periods[v]){u[v]=true}else{u[v]=x>0;x--}}}var t=(B.options.compact?B.options.compactLabels:B.options.labels);var s=B.options.whichLabels||this._normalLabels;var r=function(k){var j=B.options["compactLabels"+s(B._periods[k])];return(w[k]?A._translateDigits(B,B._periods[k])+(j?j[k]:t[k])+" ":"")};var q=(B.options.padZeroes?2:1);var p=function(k){var j=B.options["labels"+s(B._periods[k])];return((!B.options.significant&&w[k])||(B.options.significant&&u[k])?'<span class="'+A._sectionClass+'"><span class="'+A._amountClass+'">'+A._minDigits(B,B._periods[k],q)+'</span><span class="'+A._periodClass+'">'+(j?j[k]:t[k])+"</span></span>":"")};return(B.options.layout?this._buildLayout(B,w,B.options.layout,B.options.compact,B.options.significant,u):((B.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(B._hold?" "+this._holdingClass:"")+'">'+r(b)+r(f)+r(c)+r(a)+(w[i]?this._minDigits(B,B._periods[i],2):"")+(w[g]?(w[i]?B.options.timeSeparator:"")+this._minDigits(B,B._periods[g],2):"")+(w[d]?(w[i]||w[g]?B.options.timeSeparator:"")+this._minDigits(B,B._periods[d],2):""):'<span class="'+this._rowClass+" "+this._showClass+(B.options.significant||y)+(B._hold?" "+this._holdingClass:"")+'">'+p(b)+p(f)+p(c)+p(a)+p(i)+p(g)+p(d))+"</span>"+(B.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+B.options.description+"</span>":"")))},_buildLayout:function(F,E,D,C,B,A){var y=F.options[C?"compactLabels":"labels"];var x=F.options.whichLabels||this._normalLabels;var w=function(j){return(F.options[(C?"compactLabels":"labels")+x(F._periods[j])]||y)[j]};var v=function(k,j){return F.options.digits[Math.floor(k/j)%10]};var u={desc:F.options.description,sep:F.options.timeSeparator,yl:w(b),yn:this._minDigits(F,F._periods[b],1),ynn:this._minDigits(F,F._periods[b],2),ynnn:this._minDigits(F,F._periods[b],3),y1:v(F._periods[b],1),y10:v(F._periods[b],10),y100:v(F._periods[b],100),y1000:v(F._periods[b],1000),ol:w(f),on:this._minDigits(F,F._periods[f],1),onn:this._minDigits(F,F._periods[f],2),onnn:this._minDigits(F,F._periods[f],3),o1:v(F._periods[f],1),o10:v(F._periods[f],10),o100:v(F._periods[f],100),o1000:v(F._periods[f],1000),wl:w(c),wn:this._minDigits(F,F._periods[c],1),wnn:this._minDigits(F,F._periods[c],2),wnnn:this._minDigits(F,F._periods[c],3),w1:v(F._periods[c],1),w10:v(F._periods[c],10),w100:v(F._periods[c],100),w1000:v(F._periods[c],1000),dl:w(a),dn:this._minDigits(F,F._periods[a],1),dnn:this._minDigits(F,F._periods[a],2),dnnn:this._minDigits(F,F._periods[a],3),d1:v(F._periods[a],1),d10:v(F._periods[a],10),d100:v(F._periods[a],100),d1000:v(F._periods[a],1000),hl:w(i),hn:this._minDigits(F,F._periods[i],1),hnn:this._minDigits(F,F._periods[i],2),hnnn:this._minDigits(F,F._periods[i],3),h1:v(F._periods[i],1),h10:v(F._periods[i],10),h100:v(F._periods[i],100),h1000:v(F._periods[i],1000),ml:w(g),mn:this._minDigits(F,F._periods[g],1),mnn:this._minDigits(F,F._periods[g],2),mnnn:this._minDigits(F,F._periods[g],3),m1:v(F._periods[g],1),m10:v(F._periods[g],10),m100:v(F._periods[g],100),m1000:v(F._periods[g],1000),sl:w(d),sn:this._minDigits(F,F._periods[d],1),snn:this._minDigits(F,F._periods[d],2),snnn:this._minDigits(F,F._periods[d],3),s1:v(F._periods[d],1),s10:v(F._periods[d],10),s100:v(F._periods[d],100),s1000:v(F._periods[d],1000)};var t=D;for(var z=b;z<=d;z++){var s="yowdhms".charAt(z);var n=new RegExp("\\{"+s+"<\\}([\\s\\S]*)\\{"+s+">\\}","g");t=t.replace(n,((!B&&E[z])||(B&&A[z])?"$1":""))}e.each(u,function(l,k){var j=new RegExp("\\{"+l+"\\}","g");t=t.replace(j,k)});return t},_minDigits:function(k,j,l){j=""+j;if(j.length>=l){return this._translateDigits(k,j)}j="0000000000"+j;return this._translateDigits(k,j.substr(j.length-l))},_translateDigits:function(j,k){return(""+k).replace(/[0-9]/g,function(l){return j.options.digits[l]})},_determineShow:function(k){var j=k.options.format;var l=[];l[b]=(j.match("y")?"?":(j.match("Y")?"!":null));l[f]=(j.match("o")?"?":(j.match("O")?"!":null));l[c]=(j.match("w")?"?":(j.match("W")?"!":null));l[a]=(j.match("d")?"?":(j.match("D")?"!":null));l[i]=(j.match("h")?"?":(j.match("H")?"!":null));l[g]=(j.match("m")?"?":(j.match("M")?"!":null));l[d]=(j.match("s")?"?":(j.match("S")?"!":null));return l},_calculatePeriods:function(N,M,L,K){N._now=K;N._now.setMilliseconds(0);var J=new Date(N._now.getTime());if(N._since){if(K.getTime()<N._since.getTime()){N._now=K=J}else{K=N._since}}else{J.setTime(N._until.getTime());if(K.getTime()>N._until.getTime()){N._now=K=J}}var I=[0,0,0,0,0,0,0];if(M[b]||M[f]){var H=this._getDaysInMonth(K.getFullYear(),K.getMonth());var G=this._getDaysInMonth(J.getFullYear(),J.getMonth());var F=(J.getDate()==K.getDate()||(J.getDate()>=Math.min(H,G)&&K.getDate()>=Math.min(H,G)));var E=function(j){return(j.getHours()*60+j.getMinutes())*60+j.getSeconds()};var D=Math.max(0,(J.getFullYear()-K.getFullYear())*12+J.getMonth()-K.getMonth()+((J.getDate()<K.getDate()&&!F)||(F&&E(J)<E(K))?-1:0));I[b]=(M[b]?Math.floor(D/12):0);I[f]=(M[f]?D-I[b]*12:0);K=new Date(K.getTime());var C=(K.getDate()==H);var B=this._getDaysInMonth(K.getFullYear()+I[b],K.getMonth()+I[f]);if(K.getDate()>B){K.setDate(B)}K.setFullYear(K.getFullYear()+I[b]);K.setMonth(K.getMonth()+I[f]);if(C){K.setDate(B)}}var A=Math.floor((J.getTime()-K.getTime())/1000);var z=function(k,j){I[k]=(M[k]?Math.floor(A/j):0);A-=I[k]*j};z(c,604800);z(a,86400);z(i,3600);z(g,60);z(d,1);if(A>0&&!N._since){var y=[1,12,4.3482,7,24,60,60];var x=d;var w=1;for(var v=d;v>=b;v--){if(M[v]){if(I[x]>=w){I[x]=0;A=1}if(A>0){I[v]++;A=0;x=v;w=1}}w*=y[v]}}if(L){for(var v=b;v<=d;v++){if(L&&I[v]){L--}else{if(!L){I[v]=0}}}}return I}})})(jQuery);