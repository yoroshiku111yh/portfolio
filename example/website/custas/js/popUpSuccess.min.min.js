var containPopUpSuccess;containPopUpSuccess=new PIXI.Container();var backgroundPopUpSuccess;var heightTextCongratulations=0;var heightTextClear=0;var timeResult_hangchuc_second;var timeResult_hangdonvi_second;var timeResult_hangchuc_milessecond;var timeResult_hangdonvi_milessecond;var text_complete_level;var text_clear_game;var level_clear=1;var array_id_level_cleard=[];var arrayTimePlayedOneLevel=[];var hangtram_total_second;var hangchuc_total_second;var hangdonvi_total_second;var hangchuc_total_miliessecond;var hangdonvi_total_miliessecond;var giay_txt;function initContainPopUpSuccess(){position(containPopUpSuccess,stageW/2,stageH/2-25*ratio);scale(containPopUpSuccess,ratio);visible(containPopUpSuccess,0);backgroundPopUpSuccess=new PIXI.Sprite.fromImage("asset/bg/content_success.png");ratioOfWidthHeightItem(backgroundPopUpSuccess,1600);anchor(backgroundPopUpSuccess);var b=new PIXI.Sprite.fromImage("asset/decorate/congratulation_text.png");anchor(b);ratioOfWidthHeightItem(b,1600);level_clear=new PIXI.Sprite.fromImage("asset/numberLevel/"+level+".png");anchor(level_clear);ratioOfWidthHeightItem(level_clear,1600);text_complete_level=new PIXI.Sprite.fromImage("asset/decorate/finishTxt.png");anchor(text_complete_level);ratioOfWidthHeightItem(text_complete_level,1600);text_clear_game=new PIXI.Sprite.fromImage("asset/decorate/complete_game_text.png");anchor(text_clear_game);ratioOfWidthHeightItem(text_clear_game,1600);visible(text_clear_game,0);position(text_complete_level,-level_clear.height,b.height);position(text_clear_game,0,b.height);position(level_clear,text_complete_level.width/2,b.height);containPopUpSuccess.addChild(backgroundPopUpSuccess);containPopUpSuccess.addChild(b);containPopUpSuccess.addChild(text_clear_game);containPopUpSuccess.addChild(text_complete_level);containPopUpSuccess.addChild(level_clear);heightTextCongratulations=b.height;heightTextClear=text_complete_level.height;stage.addChild(containPopUpSuccess)}function hangchuc(f){var d=f%10;var e=(f*10-d*10)/100;return e}function hangtram(f){var d=f%100;var e=(f*100-d*100)/10000;return e}function settingSuccess(){array_id_level_cleard.push(idOfLevelCurrent);arrayTimePlayedOneLevel.push({level:level,second:time,milessecond:milesSecond});var av=hangchuc(result_time_second);var au=result_time_second%10;var az=hangchuc(result_time_milesSecond);var al=result_time_milesSecond%10;var Q=0;var R=0;var i=new PIXI.Sprite.fromImage("asset/numberResult/"+av+".png");var ai=new PIXI.Sprite.fromImage("asset/numberResult/"+au+".png");var ar=new PIXI.Sprite.fromImage("asset/numberResult/"+az+".png");var ah=new PIXI.Sprite.fromImage("asset/numberResult/"+al+".png");var af=new PIXI.Sprite.fromImage("asset/decorate/period.png");var ag=new PIXI.Sprite.fromImage("asset/decorate/giayTxt.png");anchor(i);anchor(ai);anchor(ar);anchor(ah);anchor(af);anchor(ag);timeResult_hangchuc_second=i;timeResult_hangdonvi_second=ai;timeResult_hangchuc_milessecond=ar;timeResult_hangdonvi_milessecond=ah;giay_txt=ag;ratioOfWidthHeightItem(i,1600);if(i.height>Q){Q=i.height}ratioOfWidthHeightItem(ai,1600);if(ai.height>Q){Q=ai.height}ratioOfWidthHeightItem(ar,1600);if(ar.height>Q){Q=ar.height}ratioOfWidthHeightItem(ah,1600);if(ah.height>Q){Q=ah.height}ratioOfWidthHeightItem(af,1600);ratioOfWidthHeightItem(ag,1600);var ad=heightTextClear+heightTextCongratulations+15*ratio;position(i,-ai.width-af.width-ag.width/2,ad);position(ai,-af.width-5-ag.width/2,ad);position(af,-ag.width/2,ad);position(ar,ai.width-af.width/2-ag.width/2,ad);position(ah,ar.width+ai.width-af.width/2-ag.width/2,ad);position(ag,ar.width+ai.width-af.width/2+ag.width/2,ad);var ak=new PIXI.Sprite.fromImage("asset/decorate/btn_replay.png");anchor(ak);ratioOfWidthHeightItem(ak,1600);ak.interactive=true;var S=new PIXI.Sprite.fromImage("asset/decorate/btn_next.png");anchor(S);ratioOfWidthHeightItem(S,1600);S.interactive=true;var ao=new PIXI.Sprite.fromImage("asset/decorate/btn_rank.png");anchor(ao);ratioOfWidthHeightItem(ao,1600);ao.interactive=true;visible(ao,0);S.tap=nextGame;S.on("mouseup",nextGame);ak.tap=replayTheGame;ak.click=replayTheGame;ao.tap=goPageRank;ao.on("mouseup",goPageRank);var Y=new PIXI.Sprite.fromImage("asset/decorate/ico_lives.png");var ab=Y.width;R=Y.height;if(level>2){anchor(Y);ratioOfWidthHeightItem(Y,1600);var V=-Y.width;position(Y,V,ad+Q+5*ratio);var W=new PIXI.Sprite.fromImage("asset/decorate/x.png");anchor(W);ratioOfWidthHeightItem(W,1600);position(W,-W.width,ad+Q+5*ratio);var ap=hangchuc(lives);var ac=lives%10;var U=new PIXI.Sprite.fromImage("asset/numberRed/"+ap+".png");anchor(U);ratioOfWidthHeightItem(U,1600);var ae=new PIXI.Sprite.fromImage("asset/numberRed/"+ac+".png");anchor(ae);ratioOfWidthHeightItem(ae,1600);position(U,W.width,ad+Q+5*ratio);position(ae,W.width+U.width,ad+Q+5*ratio);containPopUpSuccess.addChild(Y);containPopUpSuccess.addChild(W);containPopUpSuccess.addChild(U);containPopUpSuccess.addChild(ae)}position(ao,ao.width/2+5*ratio,Q+ad+15*ratio+R);position(S,S.width/2+5*ratio,Q+ad+15*ratio+R);position(ak,-ak.width/2-5*ratio,Q+ad+15*ratio+R);if(level==5){visible(text_complete_level,0);visible(level_clear,0);visible(text_clear_game,1);visible(ao,1);visible(S,0)}if(level!=5){visible(ao,0);visible(S,1);visible(text_complete_level,1);visible(level_clear,1);visible(text_clear_game,0)}var ay;var aA;var am;var ax;var aw;var Z=0;var P=0;for(var x=0;x<arrayTimePlayedOneLevel.length;x++){Z+=parseInt(arrayTimePlayedOneLevel[x].second);P+=parseInt(arrayTimePlayedOneLevel[x].milessecond)}if(P>98){var at=parseInt(P/99);P=P-at*99;Z+=at}var an=Z+"."+P;console.log("total time :"+an);ay=hangtram(Z);aA=hangchuc(Z-ay*100);am=Z-ay*100-aA*10;ax=hangchuc(P);al=ax%10;var aa=new PIXI.Sprite.fromImage("asset/numberResult/"+ay+".png");anchor(aa);ratioOfWidthHeightItem(aa,1600);var aj=new PIXI.Sprite.fromImage("asset/numberResult/"+aA+".png");anchor(aj);ratioOfWidthHeightItem(aj,1600);var aq=new PIXI.Sprite.fromImage("asset/numberResult/"+am+".png");anchor(aq);ratioOfWidthHeightItem(aq,1600);var X=new PIXI.Sprite.fromImage("asset/numberResult/"+ax+".png");anchor(X);ratioOfWidthHeightItem(X,1600);var T=new PIXI.Sprite.fromImage("asset/numberResult/"+al+".png");anchor(T);ratioOfWidthHeightItem(T,1600);position(af,-ab/3,ad);position(X,-ab/3+af.width*1.5,ad);position(T,-ab/3+af.width*1.5+X.width,ad);position(ag,-ab/3+af.width*1.5+X.width+T.width+ag.width/2,ad);position(aa,-ab/3-af.width*1.5-aj.width-aq.width,ad);position(aj,-ab/3-af.width*1.5-aq.width,ad);position(aq,-ab/3-af.width*1.5,ad);containPopUpSuccess.addChild(af);if(level<0){containPopUpSuccess.addChild(i);containPopUpSuccess.addChild(ai);containPopUpSuccess.addChild(ah);containPopUpSuccess.addChild(ar)}containPopUpSuccess.addChild(X);containPopUpSuccess.addChild(T);containPopUpSuccess.addChild(aa);containPopUpSuccess.addChild(aj);containPopUpSuccess.addChild(aq);containPopUpSuccess.addChild(ag);containPopUpSuccess.addChild(ak);containPopUpSuccess.addChild(S);containPopUpSuccess.addChild(ao);stage.addChild(containPopUpSuccess)}function clearAllChildrenInContain(c){for(var d=0;d<c.children.length;d++){if(c.children[d].children.length!=0){clearAllChildrenInContainChildren(c.children[d])}else{visible(c.children[d],0)}}}function clearAllChildrenInContainChildren(c){for(var d=0;d<c.children.length;d++){if(c.children[d].children.length!=0){clearAllChildrenInContainChildren(c.children[d])}else{visible(c.children[d],0)}}}function resetSettingArray(){score=0;arrayHoleItem=[];arrayHolder=[];arrayComplete=[];arrayHolding=[];arrayLighting=[];arrayItemMenuActive=[];arrayCheck=[];ItemNameCurrent="";time=0;milesSecond=99;win=false;arrayDataLevel=[];arrayAnimationDetail=[];arrayAnimation=[];idArrayAnimation=0;wrongTimes=0;clearInterval(timeAnimation1);clearInterval(timeAnimation2);clearInterval(timeAnimation3);visible(timeResult_hangchuc_second,0);visible(timeResult_hangdonvi_second,0);visible(timeResult_hangchuc_milessecond,0);visible(timeResult_hangdonvi_milessecond,0);visible(giay_txt,0);visible(containPopUpSuccess.children,0);arraySorted=[];arraySortListMenu=[]}function nextGame(){if(level==2){if(!activedCode){visibleWithAnimation(containAllExceptPopUpContain,0);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpSuccess,0);visibleWithScaleAnimation(containPopUpbackGround,1);visibleWithScaleAnimation(containPopUpEnterCode,1);checkContinue=false}else{if(lives==0){activedCode=false;checkContinue=false}}}if(level<findMaxTotalLevel()+1&&checkContinue){level++;resetSettingArray();inputCode.value="";for(var b=0;b<contain_item.children.length;b++){contain_item.removeChild(contain_item.children[b])}for(var b=0;b<wrapBtn.children.length;b++){wrapBtn.removeChild(wrapBtn.children[b])}visible(contain_background.children[0],0);clearAllChildrenInContain(containAllExceptPopUpContain);initContainItem();initLevel();initbase();initContainTimeAdnLives();initContainLevel();initContainBtn();ItemMenuholding();initContainPopUpSuccess();visibleWithAnimation(containAllExceptPopUpContain,1);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpbackGround,0);visibleWithScaleAnimation(containPopUpSuccess,0);visibleWithScaleAnimation(containPopUpEnterCode,0)}else{}}function replayTheGame(){inputCode.blur();clearWinAllLevelBeforeLevelWantReplay(idOfLevelCurrent);arrayTimePlayedOneLevel=[];checkContinue=true;if(level>2){if(lives>0){lives--}else{if(lives){activedCode=false}}}level=1;resetSettingArray();for(var c=0;c<contain_item.children.length;c++){contain_item.removeChild(contain_item.children[c])}for(var d=0;d<wrapBtn.children.length;d++){wrapBtn.removeChild(wrapBtn.children[c])}visible(contain_background.children[0],0);clearAllChildrenInContain(containAllExceptPopUpContain);initContainItem();initLevel();initbase();initContainTimeAdnLives();initContainLevel();initContainBtn();ItemMenuholding();initContainPopUpSuccess();visible(containAllExceptPopUpContain,1);visible(containPopUpRotateNoti,0);visible(containPopUpbackGround,0);visible(containPopUpSuccess,0);visible(containPopUpEnterCode,0)}function clearWinAllLevelBeforeLevelWantReplay(g,h){for(var e=0;e<array_id_level_cleard.length;e++){for(var f=0;f<array_level.length;f++){if(array_id_level_cleard[e]==array_level[f].id){array_level[f].complete=false}}}}function resetTheGame(){arrayComplete=[];time=time_replay;win=false;score=0;for(var b=0;b<array_level.length;b++){if(idOfLevelCurrent==array_level[b].id){array_level[b].complete=false}}for(var b=0;b<arrayItemMenuActive.length;b++){visible(arrayHolder[b],1);visible(arrayLighting[b],0);visible(arrayHolding[b],0);visible(arrayItemMenuActive[b],0);visible(arrayItemMenuUnactive[b],1);visible(arrayCheck[b],0);arrayHoleItem[b].position.x=menuOffsetX-menuBg.width/4+menuDisPerItem*b;visible(arrayHoleItem[b],0)}for(var b=0;b<3;b++){visible(arrayHoleItem[b],1)}visible(arrayHolding[0],1);visible(arrayHolder[0],0);visible(arrayLighting[0],1);ItemNameCurrent=arrayItemMenuActive[0].name;visible(timeResult_hangchuc_second,0);visible(timeResult_hangdonvi_second,0);visible(timeResult_hangchuc_milessecond,0);visible(timeResult_hangdonvi_milessecond,0);visible(giay_txt,0)}function showPopUpSuccess(){if(win){visibleWithAnimation(containAllExceptPopUpContain,0);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpbackGround,1);visibleWithScaleAnimation(containPopUpSuccess,1);settingSuccess()}else{visibleWithAnimation(containAllExceptPopUpContain,1);visibleWithScaleAnimation(containPopUpSuccess,0)}}function goPageRank(){window.location.href="https://www.google.com/?gws_rd=ssl"};