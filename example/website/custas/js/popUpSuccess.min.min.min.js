var containPopUpSuccess;containPopUpSuccess=new PIXI.Container();var backgroundPopUpSuccess;var heightTextCongratulations=0;var heightTextClear=0;var timeResult_hangchuc_second;var timeResult_hangdonvi_second;var timeResult_hangchuc_milessecond;var timeResult_hangdonvi_milessecond;var text_complete_level;var text_clear_game;var level_clear=1;var array_id_level_cleard=[];var arrayTimePlayedOneLevel=[];var hangtram_total_second;var hangchuc_total_second;var hangdonvi_total_second;var hangchuc_total_miliessecond;var hangdonvi_total_miliessecond;var giay_txt;function initContainPopUpSuccess(){position(containPopUpSuccess,stageW/2,stageH/2-25*ratio);scale(containPopUpSuccess,ratio);visible(containPopUpSuccess,0);backgroundPopUpSuccess=new PIXI.Sprite.fromImage("asset/bg/content_success.png");ratioOfWidthHeightItem(backgroundPopUpSuccess,1600);anchor(backgroundPopUpSuccess);var a=new PIXI.Sprite.fromImage("asset/decorate/congratulation_text.png");anchor(a);ratioOfWidthHeightItem(a,1600);level_clear=new PIXI.Sprite.fromImage("asset/numberLevel/"+level+".png");anchor(level_clear);ratioOfWidthHeightItem(level_clear,1600);text_complete_level=new PIXI.Sprite.fromImage("asset/decorate/finishTxt.png");anchor(text_complete_level);ratioOfWidthHeightItem(text_complete_level,1600);text_clear_game=new PIXI.Sprite.fromImage("asset/decorate/complete_game_text.png");anchor(text_clear_game);ratioOfWidthHeightItem(text_clear_game,1600);visible(text_clear_game,0);position(text_complete_level,-level_clear.height,a.height);position(text_clear_game,0,a.height);position(level_clear,text_complete_level.width/2,a.height);containPopUpSuccess.addChild(backgroundPopUpSuccess);containPopUpSuccess.addChild(a);containPopUpSuccess.addChild(text_clear_game);containPopUpSuccess.addChild(text_complete_level);containPopUpSuccess.addChild(level_clear);heightTextCongratulations=a.height;heightTextClear=text_complete_level.height;stage.addChild(containPopUpSuccess)}function hangchuc(a){var c=a%10;var b=(a*10-c*10)/100;return b}function hangtram(a){var c=a%100;var b=(a*100-c*100)/10000;return b}function settingSuccess(){array_id_level_cleard.push(idOfLevelCurrent);arrayTimePlayedOneLevel.push({level:level,second:time,milessecond:milesSecond});var k=hangchuc(result_time_second);var n=result_time_second%10;var b=hangchuc(result_time_milesSecond);var A=result_time_milesSecond%10;var s=0;var q=0;var O=new PIXI.Sprite.fromImage("asset/numberResult/"+k+".png");var D=new PIXI.Sprite.fromImage("asset/numberResult/"+n+".png");var r=new PIXI.Sprite.fromImage("asset/numberResult/"+b+".png");var E=new PIXI.Sprite.fromImage("asset/numberResult/"+A+".png");var G=new PIXI.Sprite.fromImage("asset/decorate/period.png");var F=new PIXI.Sprite.fromImage("asset/decorate/giayTxt.png");anchor(O);anchor(D);anchor(r);anchor(E);anchor(G);anchor(F);timeResult_hangchuc_second=O;timeResult_hangdonvi_second=D;timeResult_hangchuc_milessecond=r;timeResult_hangdonvi_milessecond=E;giay_txt=F;ratioOfWidthHeightItem(O,1600);if(O.height>s){s=O.height}ratioOfWidthHeightItem(D,1600);if(D.height>s){s=D.height}ratioOfWidthHeightItem(r,1600);if(r.height>s){s=r.height}ratioOfWidthHeightItem(E,1600);if(E.height>s){s=E.height}ratioOfWidthHeightItem(G,1600);ratioOfWidthHeightItem(F,1600);var I=heightTextClear+heightTextCongratulations+15*ratio;position(O,-D.width-G.width-F.width/2,I);position(D,-G.width-5-F.width/2,I);position(G,-F.width/2,I);position(r,D.width-G.width/2-F.width/2,I);position(E,r.width+D.width-G.width/2-F.width/2,I);position(F,r.width+D.width-G.width/2+F.width/2,I);var B=new PIXI.Sprite.fromImage("asset/decorate/btn_replay.png");anchor(B);ratioOfWidthHeightItem(B,1600);B.interactive=true;var p=new PIXI.Sprite.fromImage("asset/decorate/btn_next.png");anchor(p);ratioOfWidthHeightItem(p,1600);p.interactive=true;var w=new PIXI.Sprite.fromImage("asset/decorate/btn_rank.png");anchor(w);ratioOfWidthHeightItem(w,1600);w.interactive=true;visible(w,0);p.tap=nextGame;p.on("mouseup",nextGame);B.tap=replayTheGame;B.click=replayTheGame;w.tap=goPageRank;w.on("mouseup",goPageRank);var c=new PIXI.Sprite.fromImage("asset/decorate/ico_lives.png");var K=c.width;q=c.height;if(level>2){anchor(c);ratioOfWidthHeightItem(c,1600);var j=-c.width;position(c,j,I+s+5*ratio);var g=new PIXI.Sprite.fromImage("asset/decorate/x.png");anchor(g);ratioOfWidthHeightItem(g,1600);position(g,-g.width,I+s+5*ratio);var v=hangchuc(lives);var J=lives%10;var l=new PIXI.Sprite.fromImage("asset/numberRed/"+v+".png");anchor(l);ratioOfWidthHeightItem(l,1600);var H=new PIXI.Sprite.fromImage("asset/numberRed/"+J+".png");anchor(H);ratioOfWidthHeightItem(H,1600);position(l,g.width,I+s+5*ratio);position(H,g.width+l.width,I+s+5*ratio);containPopUpSuccess.addChild(c);containPopUpSuccess.addChild(g);containPopUpSuccess.addChild(l);containPopUpSuccess.addChild(H)}position(w,w.width/2+5*ratio,s+I+15*ratio+q);position(p,p.width/2+5*ratio,s+I+15*ratio+q);position(B,-B.width/2-5*ratio,s+I+15*ratio+q);if(level==5){visible(text_complete_level,0);visible(level_clear,0);visible(text_clear_game,1);visible(w,1);visible(p,0)}if(level!=5){visible(w,0);visible(p,1);visible(text_complete_level,1);visible(level_clear,1);visible(text_clear_game,0)}var e;var M;var z;var f;var h;var a=0;var u=0;for(var N=0;N<arrayTimePlayedOneLevel.length;N++){a+=parseInt(arrayTimePlayedOneLevel[N].second);u+=parseInt(arrayTimePlayedOneLevel[N].milessecond)}if(u>98){var o=parseInt(u/99);u=u-o*99;a+=o}var y=a+"."+u;console.log("total time :"+y);e=hangtram(a);M=hangchuc(a-e*100);z=a-e*100-M*10;f=hangchuc(u);A=f%10;var L=new PIXI.Sprite.fromImage("asset/numberResult/"+e+".png");anchor(L);ratioOfWidthHeightItem(L,1600);var C=new PIXI.Sprite.fromImage("asset/numberResult/"+M+".png");anchor(C);ratioOfWidthHeightItem(C,1600);var t=new PIXI.Sprite.fromImage("asset/numberResult/"+z+".png");anchor(t);ratioOfWidthHeightItem(t,1600);var d=new PIXI.Sprite.fromImage("asset/numberResult/"+f+".png");anchor(d);ratioOfWidthHeightItem(d,1600);var m=new PIXI.Sprite.fromImage("asset/numberResult/"+A+".png");anchor(m);ratioOfWidthHeightItem(m,1600);position(G,-K/3,I);position(d,-K/3+G.width*1.5,I);position(m,-K/3+G.width*1.5+d.width,I);position(F,-K/3+G.width*1.5+d.width+m.width+F.width/2,I);position(L,-K/3-G.width*1.5-C.width-t.width,I);position(C,-K/3-G.width*1.5-t.width,I);position(t,-K/3-G.width*1.5,I);containPopUpSuccess.addChild(G);if(level<0){containPopUpSuccess.addChild(O);containPopUpSuccess.addChild(D);containPopUpSuccess.addChild(E);containPopUpSuccess.addChild(r)}containPopUpSuccess.addChild(d);containPopUpSuccess.addChild(m);containPopUpSuccess.addChild(L);containPopUpSuccess.addChild(C);containPopUpSuccess.addChild(t);containPopUpSuccess.addChild(F);containPopUpSuccess.addChild(B);containPopUpSuccess.addChild(p);containPopUpSuccess.addChild(w);stage.addChild(containPopUpSuccess)}function clearAllChildrenInContain(b){for(var a=0;a<b.children.length;a++){if(b.children[a].children.length!=0){clearAllChildrenInContainChildren(b.children[a])}else{visible(b.children[a],0)}}}function clearAllChildrenInContainChildren(b){for(var a=0;a<b.children.length;a++){if(b.children[a].children.length!=0){clearAllChildrenInContainChildren(b.children[a])}else{visible(b.children[a],0)}}}function resetSettingArray(){score=0;arrayHoleItem=[];arrayHolder=[];arrayComplete=[];arrayHolding=[];arrayLighting=[];arrayItemMenuActive=[];arrayCheck=[];ItemNameCurrent="";time=0;milesSecond=99;win=false;arrayDataLevel=[];arrayAnimationDetail=[];arrayAnimation=[];idArrayAnimation=0;wrongTimes=0;clearInterval(timeAnimation1);clearInterval(timeAnimation2);clearInterval(timeAnimation3);visible(timeResult_hangchuc_second,0);visible(timeResult_hangdonvi_second,0);visible(timeResult_hangchuc_milessecond,0);visible(timeResult_hangdonvi_milessecond,0);visible(giay_txt,0);visible(containPopUpSuccess.children,0);arraySorted=[];arraySortListMenu=[]}function nextGame(){if(level==2){if(!activedCode){visibleWithAnimation(containAllExceptPopUpContain,0);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpSuccess,0);visibleWithScaleAnimation(containPopUpbackGround,1);visibleWithScaleAnimation(containPopUpEnterCode,1);checkContinue=false}else{if(lives==0){activedCode=false;checkContinue=false}}}if(level<findMaxTotalLevel()+1&&checkContinue){level++;resetSettingArray();inputCode.value="";for(var a=0;a<contain_item.children.length;a++){contain_item.removeChild(contain_item.children[a])}for(var a=0;a<wrapBtn.children.length;a++){wrapBtn.removeChild(wrapBtn.children[a])}visible(contain_background.children[0],0);clearAllChildrenInContain(containAllExceptPopUpContain);initContainItem();initLevel();initbase();initContainTimeAdnLives();initContainLevel();initContainBtn();ItemMenuholding();initContainPopUpSuccess();visibleWithAnimation(containAllExceptPopUpContain,1);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpbackGround,0);visibleWithScaleAnimation(containPopUpSuccess,0);visibleWithScaleAnimation(containPopUpEnterCode,0)}else{}}function replayTheGame(){inputCode.blur();clearWinAllLevelBeforeLevelWantReplay(idOfLevelCurrent);arrayTimePlayedOneLevel=[];checkContinue=true;if(level>2){if(lives>0){lives--}else{if(lives){activedCode=false}}}level=1;resetSettingArray();for(var b=0;b<contain_item.children.length;b++){contain_item.removeChild(contain_item.children[b])}for(var a=0;a<wrapBtn.children.length;a++){wrapBtn.removeChild(wrapBtn.children[b])}visible(contain_background.children[0],0);clearAllChildrenInContain(containAllExceptPopUpContain);initContainItem();initLevel();initbase();initContainTimeAdnLives();initContainLevel();initContainBtn();ItemMenuholding();initContainPopUpSuccess();visible(containAllExceptPopUpContain,1);visible(containPopUpRotateNoti,0);visible(containPopUpbackGround,0);visible(containPopUpSuccess,0);visible(containPopUpEnterCode,0)}function clearWinAllLevelBeforeLevelWantReplay(b,a){for(var d=0;d<array_id_level_cleard.length;d++){for(var c=0;c<array_level.length;c++){if(array_id_level_cleard[d]==array_level[c].id){array_level[c].complete=false}}}}function resetTheGame(){arrayComplete=[];time=time_replay;win=false;score=0;for(var a=0;a<array_level.length;a++){if(idOfLevelCurrent==array_level[a].id){array_level[a].complete=false}}for(var a=0;a<arrayItemMenuActive.length;a++){visible(arrayHolder[a],1);visible(arrayLighting[a],0);visible(arrayHolding[a],0);visible(arrayItemMenuActive[a],0);visible(arrayItemMenuUnactive[a],1);visible(arrayCheck[a],0);arrayHoleItem[a].position.x=menuOffsetX-menuBg.width/4+menuDisPerItem*a;visible(arrayHoleItem[a],0)}for(var a=0;a<3;a++){visible(arrayHoleItem[a],1)}visible(arrayHolding[0],1);visible(arrayHolder[0],0);visible(arrayLighting[0],1);ItemNameCurrent=arrayItemMenuActive[0].name;visible(timeResult_hangchuc_second,0);visible(timeResult_hangdonvi_second,0);visible(timeResult_hangchuc_milessecond,0);visible(timeResult_hangdonvi_milessecond,0);visible(giay_txt,0)}function showPopUpSuccess(){if(win){visibleWithAnimation(containAllExceptPopUpContain,0);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpbackGround,1);visibleWithScaleAnimation(containPopUpSuccess,1);settingSuccess()}else{visibleWithAnimation(containAllExceptPopUpContain,1);visibleWithScaleAnimation(containPopUpSuccess,0)}}function goPageRank(){window.location.href="https://www.google.com/?gws_rd=ssl"};