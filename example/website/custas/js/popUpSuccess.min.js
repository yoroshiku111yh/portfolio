var containPopUpSuccess;containPopUpSuccess=new PIXI.Container();var backgroundPopUpSuccess;var heightTextCongratulations=0;var heightTextClear=0;var timeResult_hangchuc_second;var timeResult_hangdonvi_second;var timeResult_hangchuc_milessecond;var timeResult_hangdonvi_milessecond;var text_complete_level;var text_clear_game;var level_clear=1;var array_id_level_cleard=[];var arrayTimePlayedOneLevel=[];var hangtram_total_second;var hangchuc_total_second;var hangdonvi_total_second;var hangchuc_total_miliessecond;var hangdonvi_total_miliessecond;var giay_txt;function initContainPopUpSuccess(){position(containPopUpSuccess,stageW/2,stageH/2-25*ratio);scale(containPopUpSuccess,ratio);visible(containPopUpSuccess,0);backgroundPopUpSuccess=new PIXI.Sprite.fromImage("asset/bg/content_success.png");ratioOfWidthHeightItem(backgroundPopUpSuccess,1600);anchor(backgroundPopUpSuccess);var a=new PIXI.Sprite.fromImage("asset/decorate/congratulation_text.png");anchor(a);ratioOfWidthHeightItem(a,1600);level_clear=new PIXI.Sprite.fromImage("asset/numberLevel/"+level+".png");anchor(level_clear);ratioOfWidthHeightItem(level_clear,1600);text_complete_level=new PIXI.Sprite.fromImage("asset/decorate/finishTxt.png");anchor(text_complete_level);ratioOfWidthHeightItem(text_complete_level,1600);text_clear_game=new PIXI.Sprite.fromImage("asset/decorate/complete_game_text.png");anchor(text_clear_game);ratioOfWidthHeightItem(text_clear_game,1600);visible(text_clear_game,0);position(text_complete_level,-level_clear.height,a.height);position(text_clear_game,0,a.height);position(level_clear,text_complete_level.width/2,a.height);containPopUpSuccess.addChild(backgroundPopUpSuccess);containPopUpSuccess.addChild(a);containPopUpSuccess.addChild(text_clear_game);containPopUpSuccess.addChild(text_complete_level);containPopUpSuccess.addChild(level_clear);heightTextCongratulations=a.height;heightTextClear=text_complete_level.height;stage.addChild(containPopUpSuccess)}function hangchuc(c){var b=c%10;var a=(c*10-b*10)/100;return a}function hangtram(c){var b=c%100;var a=(c*100-b*100)/10000;return a}function settingSuccess(){array_id_level_cleard.push(idOfLevelCurrent);arrayTimePlayedOneLevel.push({level:level,second:time,milessecond:milesSecond});var f=hangchuc(result_time_second);var g=result_time_second%10;var b=hangchuc(result_time_milesSecond);var p=result_time_milesSecond%10;var L=0;var K=0;var O=new PIXI.Sprite.fromImage("asset/numberResult/"+f+".png");var s=new PIXI.Sprite.fromImage("asset/numberResult/"+g+".png");var j=new PIXI.Sprite.fromImage("asset/numberResult/"+b+".png");var t=new PIXI.Sprite.fromImage("asset/numberResult/"+p+".png");var v=new PIXI.Sprite.fromImage("asset/decorate/period.png");var u=new PIXI.Sprite.fromImage("asset/decorate/giayTxt.png");anchor(O);anchor(s);anchor(j);anchor(t);anchor(v);anchor(u);timeResult_hangchuc_second=O;timeResult_hangdonvi_second=s;timeResult_hangchuc_milessecond=j;timeResult_hangdonvi_milessecond=t;giay_txt=u;ratioOfWidthHeightItem(O,1600);if(O.height>L){L=O.height}ratioOfWidthHeightItem(s,1600);if(s.height>L){L=s.height}ratioOfWidthHeightItem(j,1600);if(j.height>L){L=j.height}ratioOfWidthHeightItem(t,1600);if(t.height>L){L=t.height}ratioOfWidthHeightItem(v,1600);ratioOfWidthHeightItem(u,1600);var y=heightTextClear+heightTextCongratulations+15*ratio;position(O,-s.width-v.width-u.width/2,y);position(s,-v.width-5-u.width/2,y);position(v,-u.width/2,y);position(j,s.width-v.width/2-u.width/2,y);position(t,j.width+s.width-v.width/2-u.width/2,y);position(u,j.width+s.width-v.width/2+u.width/2,y);var q=new PIXI.Sprite.fromImage("asset/decorate/btn_replay.png");anchor(q);ratioOfWidthHeightItem(q,1600);q.interactive=true;var J=new PIXI.Sprite.fromImage("asset/decorate/btn_next.png");anchor(J);ratioOfWidthHeightItem(J,1600);J.interactive=true;var m=new PIXI.Sprite.fromImage("asset/decorate/btn_rank.png");anchor(m);ratioOfWidthHeightItem(m,1600);m.interactive=true;visible(m,0);J.tap=nextGame;J.on("mouseup",nextGame);q.tap=replayTheGame;q.click=replayTheGame;m.tap=goPageRank;m.on("mouseup",goPageRank);var D=new PIXI.Sprite.fromImage("asset/decorate/ico_lives.png");var A=D.width;K=D.height;if(level>2){anchor(D);ratioOfWidthHeightItem(D,1600);var G=-D.width;position(D,G,y+L+5*ratio);var F=new PIXI.Sprite.fromImage("asset/decorate/x.png");anchor(F);ratioOfWidthHeightItem(F,1600);position(F,-F.width,y+L+5*ratio);var l=hangchuc(lives);var z=lives%10;var H=new PIXI.Sprite.fromImage("asset/numberRed/"+l+".png");anchor(H);ratioOfWidthHeightItem(H,1600);var w=new PIXI.Sprite.fromImage("asset/numberRed/"+z+".png");anchor(w);ratioOfWidthHeightItem(w,1600);position(H,F.width,y+L+5*ratio);position(w,F.width+H.width,y+L+5*ratio);containPopUpSuccess.addChild(D);containPopUpSuccess.addChild(F);containPopUpSuccess.addChild(H);containPopUpSuccess.addChild(w)}position(m,m.width/2+5*ratio,L+y+15*ratio+K);position(J,J.width/2+5*ratio,L+y+15*ratio+K);position(q,-q.width/2-5*ratio,L+y+15*ratio+K);if(level==5){visible(text_complete_level,0);visible(level_clear,0);visible(text_clear_game,1);visible(m,1);visible(J,0)}if(level!=5){visible(m,0);visible(J,1);visible(text_complete_level,1);visible(level_clear,1);visible(text_clear_game,0)}var c;var a;var o;var d;var e;var C=0;var M=0;for(var N=0;N<arrayTimePlayedOneLevel.length;N++){C+=parseInt(arrayTimePlayedOneLevel[N].second);M+=parseInt(arrayTimePlayedOneLevel[N].milessecond)}if(M>98){var h=parseInt(M/99);M=M-h*99;C+=h}var n=C+"."+M;console.log("total time :"+n);c=hangtram(C);a=hangchuc(C-c*100);o=C-c*100-a*10;d=hangchuc(M);p=d%10;var B=new PIXI.Sprite.fromImage("asset/numberResult/"+c+".png");anchor(B);ratioOfWidthHeightItem(B,1600);var r=new PIXI.Sprite.fromImage("asset/numberResult/"+a+".png");anchor(r);ratioOfWidthHeightItem(r,1600);var k=new PIXI.Sprite.fromImage("asset/numberResult/"+o+".png");anchor(k);ratioOfWidthHeightItem(k,1600);var E=new PIXI.Sprite.fromImage("asset/numberResult/"+d+".png");anchor(E);ratioOfWidthHeightItem(E,1600);var I=new PIXI.Sprite.fromImage("asset/numberResult/"+p+".png");anchor(I);ratioOfWidthHeightItem(I,1600);position(v,-A/3,y);position(E,-A/3+v.width*1.5,y);position(I,-A/3+v.width*1.5+E.width,y);position(u,-A/3+v.width*1.5+E.width+I.width+u.width/2,y);position(B,-A/3-v.width*1.5-r.width-k.width,y);position(r,-A/3-v.width*1.5-k.width,y);position(k,-A/3-v.width*1.5,y);containPopUpSuccess.addChild(v);if(level<0){containPopUpSuccess.addChild(O);containPopUpSuccess.addChild(s);containPopUpSuccess.addChild(t);containPopUpSuccess.addChild(j)}containPopUpSuccess.addChild(E);containPopUpSuccess.addChild(I);containPopUpSuccess.addChild(B);containPopUpSuccess.addChild(r);containPopUpSuccess.addChild(k);containPopUpSuccess.addChild(u);containPopUpSuccess.addChild(q);containPopUpSuccess.addChild(J);containPopUpSuccess.addChild(m);stage.addChild(containPopUpSuccess)}function clearAllChildrenInContain(b){for(var a=0;a<b.children.length;a++){if(b.children[a].children.length!=0){clearAllChildrenInContainChildren(b.children[a])}else{visible(b.children[a],0)}}}function clearAllChildrenInContainChildren(b){for(var a=0;a<b.children.length;a++){if(b.children[a].children.length!=0){clearAllChildrenInContainChildren(b.children[a])}else{visible(b.children[a],0)}}}function resetSettingArray(){score=0;arrayHoleItem=[];arrayHolder=[];arrayComplete=[];arrayHolding=[];arrayLighting=[];arrayItemMenuActive=[];arrayCheck=[];ItemNameCurrent="";time=0;milesSecond=99;win=false;arrayDataLevel=[];arrayAnimationDetail=[];arrayAnimation=[];idArrayAnimation=0;wrongTimes=0;clearInterval(timeAnimation1);clearInterval(timeAnimation2);clearInterval(timeAnimation3);visible(timeResult_hangchuc_second,0);visible(timeResult_hangdonvi_second,0);visible(timeResult_hangchuc_milessecond,0);visible(timeResult_hangdonvi_milessecond,0);visible(giay_txt,0);visible(containPopUpSuccess.children,0);arraySorted=[];arraySortListMenu=[]}function nextGame(){if(level==2){if(!activedCode){visibleWithAnimation(containAllExceptPopUpContain,0);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpSuccess,0);visibleWithScaleAnimation(containPopUpbackGround,1);visibleWithScaleAnimation(containPopUpEnterCode,1);checkContinue=false}else{if(lives==0){activedCode=false;checkContinue=false}}}if(level<findMaxTotalLevel()+1&&checkContinue){level++;resetSettingArray();inputCode.value="";for(var a=0;a<contain_item.children.length;a++){contain_item.removeChild(contain_item.children[a])}for(var a=0;a<wrapBtn.children.length;a++){wrapBtn.removeChild(wrapBtn.children[a])}visible(contain_background.children[0],0);clearAllChildrenInContain(containAllExceptPopUpContain);initContainItem();initLevel();initbase();initContainTimeAdnLives();initContainLevel();initContainBtn();ItemMenuholding();initContainPopUpSuccess();visibleWithAnimation(containAllExceptPopUpContain,1);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpbackGround,0);visibleWithScaleAnimation(containPopUpSuccess,0);visibleWithScaleAnimation(containPopUpEnterCode,0)}else{}}function replayTheGame(){inputCode.blur();clearWinAllLevelBeforeLevelWantReplay(idOfLevelCurrent);arrayTimePlayedOneLevel=[];checkContinue=true;if(level>2){if(lives>0){lives--}else{if(lives){activedCode=false}}}level=1;resetSettingArray();for(var b=0;b<contain_item.children.length;b++){contain_item.removeChild(contain_item.children[b])}for(var a=0;a<wrapBtn.children.length;a++){wrapBtn.removeChild(wrapBtn.children[b])}visible(contain_background.children[0],0);clearAllChildrenInContain(containAllExceptPopUpContain);initContainItem();initLevel();initbase();initContainTimeAdnLives();initContainLevel();initContainBtn();ItemMenuholding();initContainPopUpSuccess();visible(containAllExceptPopUpContain,1);visible(containPopUpRotateNoti,0);visible(containPopUpbackGround,0);visible(containPopUpSuccess,0);visible(containPopUpEnterCode,0)}function clearWinAllLevelBeforeLevelWantReplay(d,c){for(var b=0;b<array_id_level_cleard.length;b++){for(var a=0;a<array_level.length;a++){if(array_id_level_cleard[b]==array_level[a].id){array_level[a].complete=false}}}}function resetTheGame(){arrayComplete=[];time=time_replay;win=false;score=0;for(var a=0;a<array_level.length;a++){if(idOfLevelCurrent==array_level[a].id){array_level[a].complete=false}}for(var a=0;a<arrayItemMenuActive.length;a++){visible(arrayHolder[a],1);visible(arrayLighting[a],0);visible(arrayHolding[a],0);visible(arrayItemMenuActive[a],0);visible(arrayItemMenuUnactive[a],1);visible(arrayCheck[a],0);arrayHoleItem[a].position.x=menuOffsetX-menuBg.width/4+menuDisPerItem*a;visible(arrayHoleItem[a],0)}for(var a=0;a<3;a++){visible(arrayHoleItem[a],1)}visible(arrayHolding[0],1);visible(arrayHolder[0],0);visible(arrayLighting[0],1);ItemNameCurrent=arrayItemMenuActive[0].name;visible(timeResult_hangchuc_second,0);visible(timeResult_hangdonvi_second,0);visible(timeResult_hangchuc_milessecond,0);visible(timeResult_hangdonvi_milessecond,0);visible(giay_txt,0)}function showPopUpSuccess(){if(win){visibleWithAnimation(containAllExceptPopUpContain,0);visibleWithScaleAnimation(containPopUpRotateNoti,0);visibleWithScaleAnimation(containPopUpbackGround,1);visibleWithScaleAnimation(containPopUpSuccess,1);settingSuccess()}else{visibleWithAnimation(containAllExceptPopUpContain,1);visibleWithScaleAnimation(containPopUpSuccess,0)}}function goPageRank(){window.location.href="https://www.google.com/?gws_rd=ssl"};